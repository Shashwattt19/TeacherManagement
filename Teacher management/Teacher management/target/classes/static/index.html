<!DOCTYPE html>
<html>
<head>
    <title>Teacher Management</title>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>ğŸ‘©â€ğŸ« Teacher Management System</h1>
    </div>

    <div class="section">
        <h2>Add / Update Teacher</h2>

        <input type="hidden" id="id">

        <div class="form-group">
            <input type="text" id="subject" placeholder="Subject">
        </div>

        <div class="form-group">
            <input type="text" id="teacherName" placeholder="Teacher Name">
        </div>

        <button onclick="saveTeacher()">ğŸ’¾ Save Teacher</button>
    </div>

    <div class="divider"></div>

    <div class="section">
        <h2>Teachers List</h2>
        <button class="btn-load" onclick="loadTeachers()">ğŸ”„ Load Teachers</button>
        <ul id="list"></ul>
    </div>
</div>

<script>
function saveTeacher() {
    let id = document.getElementById("id").value;

    let teacher = {
        subject: document.getElementById("subject").value,
        name: document.getElementById("teacherName").value
    };

    if (id === "") {
        // CREATE
        fetch("http://localhost:8080/teachers", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(teacher)
        }).then(loadTeachers);
    } else {
        // UPDATE
        fetch(`http://localhost:8080/teachers/${id}`, {
            method: "PUT",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(teacher)
        }).then(() => {
            loadTeachers();
            clearForm();
        });
    }
}

function loadTeachers() {
    fetch("http://localhost:8080/teachers")
        .then(res => res.json())
        .then(data => {
            let list = document.getElementById("list");

            if (data.length === 0) {
                list.innerHTML = '<div class="empty-state">No teachers found. Add your first teacher!</div>';
                return;
            }

            list.innerHTML = "";
            data.forEach(t => {
                list.innerHTML += `
                <li>
                    <div class="teacher-info">
                        <span class="teacher-subject">${t.subject}</span>
                        <span class="teacher-name">(${t.name})</span>
                    </div>
                    <div class="button-group">
                        <button onclick="editTeacher(${t.id}, '${t.subject}', '${t.name}')">âœï¸ Edit</button>
                        <button onclick="deleteTeacher(${t.id})">ğŸ—‘ï¸ Delete</button>
                    </div>
                </li>`;
            });
        });
}

function editTeacher(id, subject, name) {
    document.getElementById("id").value = id;
    document.getElementById("subject").value = subject;
    document.getElementById("teacherName").value = name;
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

function deleteTeacher(id) {
    if (confirm("Are you sure you want to delete this teacher?")) {
        fetch(`http://localhost:8080/teachers/${id}`, {
            method: "DELETE"
        }).then(loadTeachers);
    }
}

function clearForm() {
    document.getElementById("id").value = "";
    document.getElementById("subject").value = "";
    document.getElementById("teacherName").value = "";
}

// Auto load on page open
window.onload = loadTeachers;
</script>

</body>
</html>
